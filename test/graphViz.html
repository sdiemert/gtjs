<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Some Graphs</title>

    <script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
    <script src="../bin/require.js"></script>
    <link rel='stylesheet' href="vis.min.css"/>

    <style type="text/css">
        .viz-container {
            width: 600px;
            height: 400px;
            border: 1px solid lightgray;
        }
    </style>

</head>
<body>


    <h1>Graph Test!</h1>

    <p id="output"></p>

    <div id="viz-1" class="viz-container"></div> <br>
    <div id="viz-2" class="viz-container"></div> <br>
    <div id="viz-3" class="viz-container"></div> <br>



    <script>

        requirejs(['../bin/GraphFactory', '../bin/VizJsAdaptor', 'vis.min.js', '../bin/Rule'], function(Factory, Adaptor, vis, Rule){

            function showGraph(id, toShow){

                var A = new Adaptor.VizJsAdaptor();

                var a = A.adapt(toShow);

                console.log(a);

                var nodes = new vis.DataSet(a.nodes);
                var edges = new vis.DataSet(a.edges);
                var container = document.getElementById(id);
                var data = {
                    nodes : nodes,
                    edges : edges
                };
                var net = new vis.Network(container, data, {});

            }

            var adj2 = {

                0: [2,3],
                1: [3,4],
                2: [0,4],
                3: [0,1],
                4: [1,2]

            };

            var adj = {

                0: [1],
                1: [0,2],
                2: [1]

            };

            var gf = new Factory.GraphFactory();
            var H = gf.newGraphFromAdjList(adj2);
            var G = gf.newGraphFromAdjList(adj);

            showGraph("viz-1", H);
            showGraph("viz-2", G);

            //Deletion rule
            var r1 = new Rule.Rule(G, function(host, ids){

                $('#output').text(ids);

                host.removeNode(ids[ids.length - 1]);

                return host;

            });

            //Addition Rule
            var r2 = new Rule.Rule(G, function(host, ids){

                $('#output').text(ids);

                var x = host.addNode();

                for(var i = 0; i < ids.length; i++){

                    host.addEdgeByNumber(x, i, {}, 0);

                }

                console.log("Finished R2");
                console.log(host.asMatrix());

                return host;

            });

            r2.tryRule(H);
            r2.tryRule(H);
            r2.tryRule(H);
            r2.tryRule(H);
           // R = r1.tryRule(H);

            showGraph("viz-3", H);


        });

    </script>
</body>
</html>